{
  "repos_root": "~/repos",
  "spec_workflow_dir_name": ".spec-workflow",
  "specs_subdir": "specs",
  "tasks_filename": "tasks.md",
  "codex_command": ["codex", "e", "--dangerously-bypass-approvals-and-sandbox"],
  "prompt_template": "Continue work on spec '{spec_name}':\n\n## Current Progress\n{progress_summary}\n\n## Your Approach - CHOOSE WHAT WORKS BEST\n\nYou have FULL AUTONOMY to choose the most effective approach:\n\n### Option A: Direct Implementation (Simple Tasks)\n- For straightforward fixes, work directly\n- Use Edit/Write tools to modify code\n- Make atomic commits immediately\n\n### Option B: Agent/Swarm Coordination (Complex Work)\n- For complex multi-file work, spawn Task agents\n- Use claude-flow workers for parallel execution\n- Coordinate multiple agents for efficiency\n- Let background workers handle analysis/optimization\n\n### Option C: Hybrid Approach\n- Mix direct work with agent delegation\n- Use your judgment on what's most efficient\n\n## Available Tools\n\n**claude-flow workers** (if available):\n- map: Fast codebase analysis and tracking\n- audit: Security and quality checks  \n- optimize: Performance improvements\n- consolidate: Deduplication and cleanup\n\n**Your toolkit**:\n- Task: Spawn specialized agents for parallel work\n- Edit/Write: Direct code modification\n- Bash: Run tests, check status\n- Read/Grep: Understand codebase\n\n## Requirements\n\n1. **Read tasks.md**: Review .spec-workflow/specs/{spec_name}/tasks.md\n\n2. **Choose optimal strategy**:\n   - 1-2 simple tasks? Work directly\n   - 5+ related tasks? Spawn agents\n   - Complex refactoring? Use swarm coordination\n   - Testing? Parallel execution\n\n3. **Make commits**:\n   - After each logical change\n   - Format: 'fix(component): description'\n   - Include agent commits\n\n4. **Update tasks.md**:\n   - Mark completed tasks: **Status**: Pending → **Status**: Completed\n   - Commit updates: 'chore(spec): update task completion status'\n\n5. **Work efficiently**:\n   - Group related tasks\n   - Use parallel execution when beneficial\n   - Don't wait unnecessarily\n\n**Remember**: Choose the approach that gets tasks done fastest and most reliably!",
  "pre_session_validation_prompt": "SYNC TASK for spec '{spec_name}':\n\n## Goal\nSync tasks.md with actual codebase state so we have accurate progress tracking.\n\n## Steps\n\n1. **Read current state**:\n   - Read .spec-workflow/specs/{spec_name}/tasks.md\n   - Read the codebase files mentioned in tasks\n\n2. **Verify each task**:\n   For EVERY task in tasks.md:\n   - Check if the fix/feature described is actually implemented in the code\n   - Look for the specific changes mentioned (functions, classes, validations, etc.)\n   - Evidence of completion:\n     * Code exists in the specified files\n     * Mentioned functions/classes are present\n     * Fixes are implemented as described\n\n3. **Update tasks.md**:\n   - Tasks with fixes implemented → **Status**: Completed\n   - Tasks partially done → **Status**: In Progress  \n   - Tasks not started → **Status**: Pending\n   - Update test checkboxes [ ] [x] based on test file existence\n\n4. **Clean up if needed**:\n   - Merge duplicate tasks\n   - Split overly broad tasks\n   - Add missing tasks if you discover untracked work\n\n5. **Commit**:\n   - git add .spec-workflow/specs/{spec_name}/tasks.md\n   - git commit -m 'chore(spec): sync tasks.md with codebase reality'\n\nIMPORTANT:\n- Be THOROUGH - actually check the code, don't assume\n- DO NOT implement fixes - only update task statuses\n- DO NOT use Task tool or spawn agents - work synchronously\n- MUST commit when done",
  "enable_pre_session_validation": true,
  "no_commit_limit": 3,
  "log_dir_name": "logs",
  "log_file_template": "task_{index}.log",
  "ignore_dirs": [".git", ".next", "node_modules", "dist"],
  "monitor_refresh_seconds": 5,
  "cache_dir": "~/.cache/spec-workflow-runner",
  "cache_max_age_days": 7,
  "activity_timeout_seconds": 300,
  "activity_check_interval_seconds": 300,
  "mcp_server_name": "spec-workflow",
  "mcp_package": "npx @pimzino/spec-workflow-mcp@latest",
  "codex_config_overrides": {
    "mcp_servers.spec-workflow.tool_timeout_sec": 60,
    "mcp_servers.spec-workflow.startup_timeout_sec": 60
  },
  "retry_max_retries": 3,
  "retry_backoff_seconds": 5,
  "retry_on_crash": true,
  "retry_log_dir": "logs/retries",
  "retry_backoff_multiplier": 2.0,
  "retry_max_backoff_seconds": 300
}

{
  "repos_root": "~/repos",
  "spec_workflow_dir_name": ".spec-workflow",
  "specs_subdir": "specs",
  "tasks_filename": "tasks.md",
  "codex_command": ["codex", "e", "--dangerously-bypass-approvals-and-sandbox"],
  "prompt_template": "Continue work on spec '{spec_name}':\n\n## Current Progress\n{progress_summary}\n\n## Task Tracking Format\n\nWe use **checkbox format** for progress tracking:\n- `- [ ]` = Pending task\n- `- [-]` = In progress\n- `- [x]` = Completed\n\nUpdate task status by changing the checkbox state in tasks.md.\n\n## Your Approach - CHOOSE WHAT WORKS BEST\n\nYou have FULL AUTONOMY to choose the most effective approach:\n\n### Option A: Direct Implementation (Simple Tasks)\n- For straightforward fixes, work directly\n- Use Edit/Write tools to modify code\n- Make atomic commits immediately\n\n### Option B: Agent/Swarm Coordination (Complex Work)\n- For complex multi-file work, spawn Task agents\n- Use claude-flow workers for parallel execution\n- Coordinate multiple agents for efficiency\n- Let background workers handle analysis/optimization\n\n### Option C: Hybrid Approach\n- Mix direct work with agent delegation\n- Use your judgment on what's most efficient\n\n## Available Tools\n\n**claude-flow workers** (if available):\n- map: Fast codebase analysis and tracking\n- audit: Security and quality checks  \n- optimize: Performance improvements\n- consolidate: Deduplication and cleanup\n\n**Your toolkit**:\n- Task: Spawn specialized agents for parallel work\n- Edit/Write: Direct code modification\n- Bash: Run tests, check status\n- Read/Grep: Understand codebase\n\n## Requirements\n\n1. **Read tasks.md**: Review .spec-workflow/specs/{spec_name}/tasks.md\n\n2. **Choose optimal strategy**:\n   - 1-2 simple tasks? Work directly\n   - 5+ related tasks? Spawn agents\n   - Complex refactoring? Use swarm coordination\n   - Testing? Parallel execution\n\n3. **Make commits**:\n   - After each logical change\n   - Format: 'fix(component): description'\n   - Include agent commits\n\n4. **Update tasks.md**:\n   - Change checkbox state: `- [ ]` → `- [-]` → `- [x]`\n   - Commit updates: 'chore(spec): update task completion status'\n\n5. **Work efficiently**:\n   - Group related tasks\n   - Use parallel execution when beneficial\n   - Don't wait unnecessarily\n\n**Remember**: Choose the approach that gets tasks done fastest and most reliably!",
  "pre_session_validation_prompt": "TEMPLATE CHECK for spec '{spec_name}':\n\n## Goal\nVerify tasks.md follows .spec-workflow/templates/tasks-template.md structure.\n\n## Steps\n\n1. Check if `.spec-workflow/specs/{spec_name}/tasks.md` exists\n2. Verify it follows the template structure in `.spec-workflow/templates/tasks-template.md`\n3. Report compliance status\n\nIMPORTANT:\n- DO NOT review code or update task statuses\n- DO NOT make commits\n- ONLY check template compliance\n- This should complete in <5 seconds\n- Save output to logs/{spec_name}/validation.log",
  "enable_pre_session_validation": true,
  "no_commit_limit": 3,
  "log_dir_name": "logs",
  "log_file_template": "task_{index}.log",
  "ignore_dirs": [".git", ".next", "node_modules", "dist"],
  "monitor_refresh_seconds": 5,
  "cache_dir": "~/.cache/spec-workflow-runner",
  "cache_max_age_days": 7,
  "activity_timeout_seconds": 300,
  "activity_check_interval_seconds": 300,
  "mcp_server_name": "spec-workflow",
  "mcp_package": "npx @pimzino/spec-workflow-mcp@latest",
  "codex_config_overrides": {
    "mcp_servers.spec-workflow.tool_timeout_sec": 60,
    "mcp_servers.spec-workflow.startup_timeout_sec": 60
  },
  "retry_max_retries": 3,
  "retry_backoff_seconds": 5,
  "retry_on_crash": true,
  "retry_log_dir": "logs/retries",
  "retry_backoff_multiplier": 2.0,
  "retry_max_backoff_seconds": 300,
  "enable_smart_completion_check": true,
  "completion_check_max_probes": 5,
  "completion_check_probe_interval": 30,
  "enable_three_phase_workflow": false,
  "block_commits_during_implementation": true,
  "implementation_prompt": "IMPLEMENTATION ONLY for spec '{spec_name}':\n\n## Current Progress\n{progress_summary}\n\n## Task Tracking\n\nCheckbox format: `- [ ]` pending, `- [-]` in progress, `- [x]` completed\n\n## Your Mission: IMPLEMENT CODE ONLY\n\n**RESTRICTIONS:**\n- ❌ NO git commits (blocked by pre-commit hook)\n- ❌ NO tasks.md updates (verification phase handles this)\n- ✅ YES - Write production code\n- ✅ YES - Write tests\n- ✅ YES - Fix bugs\n- ✅ YES - Meet acceptance criteria\n\n## Focus Areas\n\n1. **Read tasks.md**: Review in-progress tasks in .spec-workflow/specs/{spec_name}/tasks.md\n\n2. **Check acceptance criteria**: Each task has checkboxes - satisfy them all\n\n3. **Implement production code**:\n   - Write real implementations (not just mocks/tests)\n   - Follow file paths specified in tasks\n   - Create missing files\n   - Update existing files\n\n4. **Write tests** (if specified in task):\n   - Unit tests\n   - Widget tests  \n   - Integration tests\n\n5. **Verify your work**:\n   - Check acceptance criteria boxes if met\n   - Ensure files created match task requirements\n   - Run tests if possible\n\n## Post-Session\n\nAfter this session:\n- Verification script will check your work\n- Tasks will be marked complete only if acceptance criteria met\n- Git commits will be made for verified work\n- Incomplete work stays as in-progress\n\n**Focus**: Implement solid, working code. Verification happens next!",
  "post_session_verification_prompt": "VERIFY IMPLEMENTATION for spec '{spec_name}':\n\n## Goal\nVerify completed work, update tasks.md, and commit verified implementations.\n\n## Steps\n\n1. **Review in-progress tasks**:\n   - Read .spec-workflow/specs/{spec_name}/tasks.md\n   - Find tasks marked `- [-]` (in progress)\n\n2. **Check each task**:\n   - Verify files exist (not just mocks/tests)\n   - Check acceptance criteria boxes\n   - Confirm implementation is production-ready\n\n3. **Update tasks.md**:\n   - Mark `- [x]` ONLY if:\n     - All acceptance criteria met\n     - Production code exists (not just tests)\n     - Implementation is complete\n   - Keep `- [-]` if:\n     - Partial implementation\n     - Only tests exist\n     - Acceptance criteria incomplete\n\n4. **Prepare git commit**:\n   - Stage files: `git add -A`\n   - Create descriptive commit message\n   - Format: 'feat({spec_name}): complete task X.Y'\n   - Include Co-Authored-By: Claude Sonnet 4.5\n   - Make commit for verified work only\n\n5. **Report results**:\n   - List tasks marked complete\n   - List tasks still in progress (with reasons)\n   - Show commit SHA if created\n\nIMPORTANT:\n- Be honest about completion status\n- Don't mark tasks complete if only mocks/tests exist\n- Only commit verified, production-ready code\n- Save output to logs/{spec_name}/verification.log"
}
